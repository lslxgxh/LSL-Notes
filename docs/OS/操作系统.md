# 操作系统

## 1. 概述

### 1.1 概念

操作系统是一个控制程序、资源管理器

**特点**

* 并发：计算机系统中同时存在多个运行的程序，需要OS管理和调度。
* 共享：宏观 “同时”访问 微观 互斥访问
* 虚拟：利用多道程序设计技术，让每个用户都觉得有一个计算机专门为他服务
* 异步：
  1. 程序的执行不是一贯到底的，而是走走停停，向前推进的速度不可预知
  2. 只要运行环境相同，OS需要保证程序运行的结果也要相同

### 1.2 演变

#### 1.2.1 单用户系统

#### 1.2.2 批处理系统

* 顺序执行
* 批处理

#### 1.2.3 多道程序系统

* 保持多个工作在内存中并且在各个工作间复用CPU

#### 1.2.4 分时系统

* 每一个作业计算一段时间后产生时钟中断，然后交替执行
* 时钟和CPU是独立的，时钟中断程序时这样的：在CPU执行指令时，计数器（计时器）同时在计时，当计时器溢出时，就向CPU申请中断，如果允许响应中断，CPU就转到中断服务程序执行相关的程序。

#### 1.2.5 个人电脑操作系统 

#### 1.2.6 分布式操作系统

* 网络支持成为一个重要的功能
* 通常支持分布式服务：跨多系统的数据共享与协调
* 可能使用多个处理器：松、紧耦合系统
* 高可用性与可靠性的要求

### 1.3 操作系统结构

* 简单结构
* 分层结构：最底层硬件，最高层用户界面。使用模块化，每一层仅使用更低一层的功能（操作）和服务。
* 微内核结构
  1. 大内核：大内核是将操作系统功能作为一个紧密结合的整体放到内核。由于各模块共享信息，因此有很高的性能。
  2. 微内核：由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。移出的部分根据分层的原则划分成若干服务，相互独立。在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一个模块运行在内核态，其余模块运行在用户态。因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。

![img](https://github.com/CyC2018/CS-Notes/raw/master/notes/pics/2_14_microkernelArchitecture.jpg)

* 外核结构（硬件上只有一个安全绑定）
  1. 让内核分配机器的物理资源给多个应用程序，并让每个程序决定如何处理这些资源
  2. 程序能连接到操作系统库（libOS）实现了操作系统抽象
  3. 保护与控制分离
* VMM 虚拟机管理器 硬件——VMM——操作系统
