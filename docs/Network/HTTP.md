# HTTP和HTTPS详解。

### 一，HTTP和HTTPS基本概念

　　深入学习这个东西前，我们先来从维基百科上看看它俩的概念。
　　**HTTP**:超文本传输协议（英文：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议[1]。HTTP是万维网的数据通信的基础。设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。通过HTTP或者HTTPS协议请求的资源由统一资源标识符（Uniform Resource Identifiers，URI）来标识。
　　**HTTPS**：超文本传输安全协议（英语：Hypertext Transfer Protocol Secure，缩写：HTTPS，常称为HTTP over TLS，HTTP over SSL或HTTP Secure）是一种通过计算机网络进行安全通信的传输协议。HTTPS经由HTTP进行通信，但利用SSL/TLS来加密数据包。HTTPS开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。这个协议由网景公司（Netscape）在1994年首次提出，随后扩展到互联网上。历史上，HTTPS连接经常用于万维网上的交易支付和企业信息系统中敏感信息的传输。在2000年代晚期和2010年代早期，HTTPS开始广泛使用于保护所有类型网站上的网页真实性，保护账户和保持用户通信，身份和网络浏览的私密性。

### 二，HTTP和HTTPS的差异

　　1，从上面概念也可以看出来HTTP是不安全的，且攻击者通过监听和中间人攻击等手段，可以获取网站帐户和敏感信息等。HTTPS被设计为可防止前述攻击，并在正确配置时被认为是安全的。
　　2，HTTP的URL由“[http://”起始且默认使用端口80，而HTTPS的URL由“https://”起始且默认使用端口443。](https://link.juejin.im/?target=http%3A%2F%2F%E2%80%9D%E8%B5%B7%E5%A7%8B%E4%B8%94%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8%E7%AB%AF%E5%8F%A380%EF%BC%8C%E8%80%8CHTTPS%E7%9A%84URL%E7%94%B1%E2%80%9Chttps%3A%2F%2F%E2%80%9D%E8%B5%B7%E5%A7%8B%E4%B8%94%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8%E7%AB%AF%E5%8F%A3443%E3%80%82)
　　3，HTTP协议运行在TCP之上，所有传输的内容都是明文，客户端和服务器端都无法验证对方的身份。HTTPS是运行在SSL/TLS之上的HTTP协议，SSL/TLS运行在TCP之上。所有传输的内容都经过加密，加密采用对称加密，但对称加密的密钥用服务器方的证书进行了非对称加密。
　　1）对称加密：密钥只有一个，加密解密为同一个密码，且加解密速度快，典型的对称加密算法有DES、AES等；
　　2）非对称加密：密钥成对出现（且根据公钥无法推知私钥，根据私钥也无法推知公钥），加密解密使用不同密钥（公钥加密需要私钥解密，私钥加密需要公钥解密），相对对称加密速度较慢，典型的非对称加密算法有RSA、DSA等。
　　

![ＴLS/SSL](https://user-gold-cdn.xitu.io/2017/11/8/774c0fa85a357d384e12c8e395690f64?imageslim)ＴLS/SSL



### 三，HTTPS工作原理

#### 下面看一下网站访问过程：

　　大家很明显发现目前大部分网站使用的还是http协议，下面我们通过一个图片很容易的了解一下网站访问的一个过程。

![网站访问过程](https://user-gold-cdn.xitu.io/2017/11/8/e8959b2039f082b234e5e9ad2eb23ddc?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)网站访问过程



#### 了解完网站访问后我们来看一下使用HTTPS的工作原理



![HTTPS的工作原理](https://user-gold-cdn.xitu.io/2017/11/8/65c06c858d9270927f014b05b98af625?imageslim)HTTPS的工作原理



　　（1）客户使用HTTPS的URL访问Web服务器，要求与Web服务器建立SSL连接。
　　（2）Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。
　　（3）客户端的浏览器与Web服务器开始协商SSL/TLS连接的安全等级，也就是信息加密的等级。
　　（4）客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。
　　（5）Web服务器利用自己的私钥解密出会话密钥。
　　（6）Web服务器利用会话密钥加密与客户端之间的通信。

#### 从上面可以总结出HTTPS的优点：

　　（1）客户端产生的密钥只有客户端和服务器端能得到；
　　（2）加密的数据只有客户端和服务器端才能得到明文；
　　（3）客户端到服务端的通信是安全的。
　　另外谷歌曾在2014年8月份调整搜索引擎算法，并称“比起同等HTTP网站，采用HTTPS加密的网站在搜索结果中的排名将会更高”。

### 四，HTTPS的局限/缺点

　　我们说了这么多HTTPS的优点，难道它就没有缺点或者说是局限吗？当然有，毕竟万物不可完美！
　　1,HTTPS比HTTP耗费更多服务器资源（https其实就是建构在SSL/TLS之上的 http协议，所以要比较https比http多用多少服务器资源，主要看SSL/TLS本身消耗多少服务器资源。）

![HTTPS比HTTP](https://user-gold-cdn.xitu.io/2017/11/8/11114e27a3ba212d333e91ace106c4a9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)HTTPS比HTTP

　　2，耗费的资源多，过程也复杂，想当然访问不如HTTP高效。大流量网站非必要也不会采用，流量成本太高。

　　3，HTTPS并不能防止站点被网络蜘蛛抓取。在某些情形中，被加密资源的URL可仅通过截获请求和响应的大小推得，这就可使攻击者同时知道明文（公开的静态内容）和密文（被加密过的明文），从而使选择密文攻击成为可能。

　　４，SSL证书需要钱，功能越强大的证书费用越高，个人网站、小网站没有必要一般不会用。

　　５，SSL证书通常需要绑定IP，不能在同一IP上绑定多个域名，IPv4资源不可能支撑这个消耗。
